"use strict";(()=>{var e={};e.id=937,e.ids=[937],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},6162:e=>{e.exports=require("stream")},1764:e=>{e.exports=require("util")},665:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>w,patchFetch:()=>q,requestAsyncStorage:()=>v,routeModule:()=>h,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var i={};t.r(i),t.d(i,{POST:()=>x});var s=t(9303),a=t(8716),n=t(670),o=t(7070),u=t(3524),p=t(8691),c=t(1482),l=t.n(c);let m=new u.PrismaClient,d=process.env.JWT_SECRET||"supersecret!";async function x(e){try{let{email:r,password:t,name:i,lastname:s}=await e.json();if(await m.user.findUnique({where:{email:r}}))return new Response(JSON.stringify({success:!1,error:"Email d\xe9j\xe0 utilis\xe9."}),{status:400});let a=await p.ZP.hash(t,10),n=await m.user.create({data:{email:r,name:i,lastname:s,password:a}}),u=l().sign({id:n.id,email:n.email},d,{expiresIn:"7d"}),c=o.NextResponse.json({success:!0,message:"Utilisateur cr\xe9\xe9 avec succ\xe8s",user:{id:n.id,email:n.email,name:n.name,lastname:n.lastname}},{status:201});return c.cookies.set({name:"auth",value:u,httpOnly:!0,path:"/",secure:!0,maxAge:604800}),c}catch(e){return console.error("Erreur inscription:",e),new Response(JSON.stringify({success:!1,error:"Erreur serveur"}),{status:500})}}let h=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/inscription/route",pathname:"/api/inscription",filename:"route",bundlePath:"app/api/inscription/route"},resolvedPagePath:"C:\\Users\\emyna\\Documents\\Ecole\\React\\ProjetINT\\AirDiopMobile-main03\\AirDiopMobile-main\\src\\app\\api\\inscription\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:v,staticGenerationAsyncStorage:g,serverHooks:f}=h,w="/api/inscription/route";function q(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[948,972,482,691],()=>t(665));module.exports=i})();