(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{4487:function(e,s,t){Promise.resolve().then(t.bind(t,5479))},5479:function(e,s,t){"use strict";t.d(s,{default:function(){return n}});var r=t(7437),a=t(2265);function n(){let[e,s]=(0,a.useState)([]),[t,n]=(0,a.useState)(null),i=async()=>{let e=await fetch("/api/admin/users",{credentials:"include"}),t=await e.json();e.ok?s(t.users):n(t.error)};(0,a.useEffect)(()=>{i()},[]);let l=async e=>{if(!confirm("Supprimer cet utilisateur ?"))return;let s=await fetch("/api/admin/users/".concat(e),{method:"DELETE",credentials:"include"});s.ok?i():alert((await s.json()).error)};return(0,r.jsxs)("div",{className:"bg-white rounded shadow p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Gestion des utilisateurs"}),t&&(0,r.jsx)("p",{className:"text-red-500",children:t}),(0,r.jsxs)("table",{className:"w-full table-auto",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2",children:"ID"}),(0,r.jsx)("th",{className:"px-4 py-2",children:"Email"}),(0,r.jsx)("th",{className:"px-4 py-2",children:"Nom"}),(0,r.jsx)("th",{className:"px-4 py-2",children:"Admin"}),(0,r.jsx)("th",{className:"px-4 py-2",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,r.jsx)("td",{className:"border px-4 py-2",children:e.id}),(0,r.jsx)("td",{className:"border px-4 py-2",children:e.email}),(0,r.jsxs)("td",{className:"border px-4 py-2",children:[e.name," ",e.lastname]}),(0,r.jsx)("td",{className:"border px-4 py-2 text-center",children:e.isAdmin?"âœ“":""}),(0,r.jsx)("td",{className:"border px-4 py-2 text-center",children:(0,r.jsx)("button",{onClick:()=>l(e.id),className:"px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded",children:"Supprimer"})})]},e.id))})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=4487)}),_N_E=e.O()}]);