(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[640],{1741:function(e,t,r){Promise.resolve().then(r.bind(r,825)),Promise.resolve().then(r.bind(r,6561))},6346:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("CloudDownload",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]])},8293:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},7226:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},6381:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]])},5929:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},2369:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},825:function(e,t,r){"use strict";r.d(t,{default:function(){return o}});var a=r(7437),s=r(2265),n=r(7648),l=r(6381);function o(){let[e,t]=(0,s.useState)(""),[r,o]=(0,s.useState)(""),[i,d]=(0,s.useState)(""),c=async t=>{t.preventDefault(),d("");let a=await fetch("/api/connexion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})}),s=await a.json();s.success?window.location.href="/tableau":d(s.error||"Erreur de connexion")};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-yellow-50 to-sky-200 dark:from-gray-900 dark:via-gray-950 dark:to-gray-900 transition-colors",children:(0,a.jsxs)("form",{id:"form-connexion",className:"relative bg-white dark:bg-gray-900 p-8 rounded-3xl shadow-2xl w-full max-w-md flex flex-col items-center",onSubmit:c,children:[(0,a.jsx)("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-sky-500 dark:bg-yellow-400 p-3 rounded-full shadow-lg",children:(0,a.jsx)(l.Z,{className:"w-8 h-8 text-white dark:text-sky-600"})}),(0,a.jsx)("h2",{className:"text-3xl font-bold mb-7 text-sky-500 dark:text-yellow-400 mt-4 text-center drop-shadow",children:"Connexion \xe0 AirDiop"}),(0,a.jsxs)("div",{className:"w-full mb-5",children:[(0,a.jsx)("label",{htmlFor:"email",className:"block mb-2 text-gray-700 dark:text-gray-200 font-medium",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",className:"w-full px-4 py-2 border border-sky-300 dark:border-yellow-300 bg-sky-50 dark:bg-gray-800 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-400 dark:focus:ring-yellow-400 transition",value:e,onChange:e=>t(e.target.value),required:!0,autoFocus:!0})]}),(0,a.jsxs)("div",{className:"w-full mb-7",children:[(0,a.jsx)("label",{htmlFor:"password",className:"block mb-2 text-gray-700 dark:text-gray-200 font-medium",children:"Mot de passe"}),(0,a.jsx)("input",{id:"password",type:"password",className:"w-full px-4 py-2 border border-sky-300 dark:border-yellow-300 bg-sky-50 dark:bg-gray-800 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-400 dark:focus:ring-yellow-400 transition",value:r,onChange:e=>o(e.target.value),required:!0}),(0,a.jsx)(n.default,{href:"/inscription",className:"block text-right text-sm text-sky-500 dark:text-yellow-400 hover:underline mt-2",children:"Cr\xe9e un compte"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-sky-500 hover:bg-sky-600 dark:bg-yellow-400 dark:hover:bg-yellow-500 text-white dark:text-blue-900 font-bold py-3 px-4 rounded-lg transition duration-200 shadow",children:"Se connecter"}),i&&(0,a.jsx)("div",{className:"text-red-600 dark:text-red-400 text-center mt-5",children:i})]})})}},6561:function(e,t,r){"use strict";r.d(t,{Header:function(){return h}});var a=r(7437),s=r(2265),n=r(2369),l=r(5929),o=r(7226),i=r(8293),d=r(7648),c=r(6012),u=r(6346);function x(){let[e,t]=(0,s.useState)(null);if((0,s.useEffect)(()=>{let e=e=>{e.preventDefault(),t(e)};return window.addEventListener("beforeinstallprompt",e),()=>window.removeEventListener("beforeinstallprompt",e)},[]),!e)return null;let r=async()=>{e.prompt();let{outcome:r}=await e.userChoice;"accepted"===r&&t(null)};return(0,a.jsxs)("button",{onClick:r,className:"flex items-center space-x-2 px-3 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg transition-colors",title:"Installer l'application",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5"}),"+      ",(0,a.jsx)("span",{children:"Installer"}),"+    "]})}let h=()=>{let{connected:e,user:t}=function(){let[e,t]=(0,s.useState)(!1),[r,a]=(0,s.useState)(null);return(0,s.useEffect)(()=>{fetch("/api/user-status",{credentials:"include"}).then(async e=>{if(!e.ok)throw Error("Not authenticated");let r=await e.json();t(r.connected),a(r.user||null)}).catch(()=>{t(!1),a(null)})},[]),{connected:e,user:r}}(),[r,u]=(0,s.useState)(!1),{dark:h,toggleDark:m}=(0,s.useContext)(c.v),y=async()=>{await fetch("/api/logout",{method:"POST"}),window.location.href="/connexion"};return(0,a.jsxs)("header",{className:"bg-white dark:bg-gray-950 shadow-sm border-b border-gray-200 dark:border-gray-800 transition-colors",children:[(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-sky-500 rounded-lg",children:(0,a.jsx)("img",{src:"/img/logoJet.png",alt:"Logo AirDiop",className:"w-8 h-8 object-contain"})}),(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-yellow-100",children:"AirDiop"})]}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[(0,a.jsx)(d.default,{href:"/",className:"text-gray-700 dark:text-gray-200 hover:text-sky-500 font-medium transition-colors",children:"Vols"}),(0,a.jsx)(d.default,{href:"/tableau",className:"text-gray-700 dark:text-gray-200 hover:text-sky-500 font-medium transition-colors",children:"Tableau de bord"}),(0,a.jsx)(d.default,{href:"/about",className:"text-gray-700 dark:text-gray-200 hover:text-sky-500 font-medium transition-colors",children:"\xc0 propos"}),(0,a.jsx)(d.default,{href:"/decouverte",className:"text-gray-700 dark:text-gray-200 hover:text-sky-500 font-medium transition-colors",children:"D\xe9couverte"}),e&&(null==t?void 0:t.isAdmin)&&(0,a.jsx)(d.default,{href:"/admin",className:"text-red-500 hover:text-red-600",children:"Admin"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e?(0,a.jsxs)("button",{onClick:y,className:"hidden md:flex items-center space-x-2 px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-900 rounded-lg transition-colors",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"D\xe9connexion"})]}):(0,a.jsxs)(d.default,{href:"/connexion",className:"hidden md:flex items-center space-x-2 px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-900 rounded-lg transition-colors",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Connexion"})]}),(0,a.jsx)(x,{}),(0,a.jsx)("button",{onClick:m,className:"p-2 rounded-full transition bg-gray-200 dark:bg-gray-700",title:"Changer le mode d'affichage",children:h?(0,a.jsx)(l.Z,{className:"w-5 h-5 text-yellow-400"}):(0,a.jsx)(o.Z,{className:"w-5 h-5 text-gray-700"})}),(0,a.jsx)("button",{className:"md:hidden p-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-900 rounded-lg",onClick:()=>u(e=>!e),"aria-label":"Ouvrir le menu",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})})]})]})}),r&&(0,a.jsxs)("nav",{className:"md:hidden flex flex-col bg-white dark:bg-gray-950 px-4 py-2 rounded shadow space-y-2 mt-2",children:[(0,a.jsx)(d.default,{href:"/",className:"text-gray-700 dark:text-gray-200 hover:text-sky-500 font-medium transition-colors",onClick:()=>u(!1),children:"Vols"}),(0,a.jsx)(d.default,{href:"/tableau",className:"text-gray-700 dark:text-gray-200 hover:text-sky-500 font-medium transition-colors",onClick:()=>u(!1),children:"Tableau de bord"}),(0,a.jsx)(d.default,{href:"/about",className:"text-gray-700 dark:text-gray-200 hover:text-sky-500 font-medium transition-colors",onClick:()=>u(!1),children:"\xc0 propos"}),(0,a.jsx)(d.default,{href:"/decouverte",className:"text-gray-700 dark:text-gray-200 hover:text-sky-500 font-medium transition-colors",onClick:()=>u(!1),children:"D\xe9couverte"}),e&&(null==t?void 0:t.isAdmin)&&(0,a.jsx)(d.default,{href:"/admin",className:"text-red-500 hover:text-red-600",children:"Admin"}),!e&&(0,a.jsxs)(d.default,{href:"/connexion",className:"flex items-center space-x-2 px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-900 rounded-lg transition-colors",onClick:()=>u(!1),children:[(0,a.jsx)(n.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Connexion"})]}),e&&(0,a.jsxs)("button",{onClick:()=>{u(!1),y()},className:"flex items-center space-x-2 px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-900 rounded-lg transition-colors",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"D\xe9connexion"})]}),(0,a.jsx)(x,{}),(0,a.jsxs)("button",{onClick:m,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-900 rounded-lg transition-colors",title:"Changer le mode d'affichage",children:[h?(0,a.jsx)(l.Z,{className:"w-5 h-5 text-yellow-400"}):(0,a.jsx)(o.Z,{className:"w-5 h-5 text-gray-700"}),(0,a.jsxs)("span",{children:["Mode ",h?"Clair":"Sombre"]})]})]})]})}},6012:function(e,t,r){"use strict";r.d(t,{W:function(){return l},v:function(){return n}});var a=r(7437),s=r(2265);let n=(0,s.createContext)({dark:!1,toggleDark:()=>{}});function l(e){let{children:t}=e,[r,l]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{l("dark"===localStorage.getItem("theme"))},[]),(0,s.useEffect)(()=>{r?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[r]),(0,a.jsx)(n.Provider,{value:{dark:r,toggleDark:()=>l(e=>!e)},children:t})}}},function(e){e.O(0,[216,971,117,744],function(){return e(e.s=1741)}),_N_E=e.O()}]);